box: golang
build:
  steps:
    - script:
        name: initialize git submodules
        code: |
          # $(git clone https://github.com/mgjohansen/hucore ./themes/hucore)
          $(git clone -b patch-1 https://github.com/itaditya/hucore ./themes/hucore)
    - arjen/hugo-build:
        version: "0.40.3"
        theme: hucore
        flags: --disableKinds=["sitemap"]
  after-steps:
      - slack-notifier:
          url: $WEBHOOK_URL
          channel: blog
          username: wercker
deploy:
  steps:
    - script:
        name: remove .DS_Store
        code: |
          rm public/.DS_Store
    - lukevivier/gh-pages:
        token: $GITHUB_PERSONAL_ACCESS_TOKEN
        basedir: public
        repo: onigra/onigra.github.io
  after-steps:
      - slack-notifier:
          url: $WEBHOOK_URL
          channel: blog
          username: wercker
